<mxfile host="65bd71144e">
    <diagram id="A_fN7yIzwsV6AJvcK3e1" name="Page-1">
        <mxGraphModel dx="1066" dy="776" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2000" pageHeight="2000" background="#ffffff" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="2" value="Incidencia" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;marginBottom=0;rounded=0;shadow=0;strokeWidth=2;fillColor=#ffe6cc;strokeColor=#d79b00;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="20" y="40" width="340" height="790" as="geometry"/>
                </mxCell>
                <mxCell id="3" value=" IDs DE REFERENCIA&#xa;- id: String (ID personalizado INC-*)&#xa;- sucursalId: String&#xa;- reportadoPorId: String&#xa;- categoriaId: String&#xa;- subcategoriaId: String" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="2" vertex="1">
                    <mxGeometry y="30" width="340" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="4" value=" FECHAS Y RIESGO&#xa;- fechaInicio: Date&#xa;- fechaFinalizacion: Date | null&#xa;- nivelRiesgo: String (bajo/medio/alto/critico)&#xa;- estado: String (pendiente/finalizada)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="2" vertex="1">
                    <mxGeometry y="130" width="340" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="5" value=" DESCRIPCIÓN Y MEDIA&#xa;- detalles: String&#xa;- imagenes: Array&lt;string&gt; (URLs)&#xa;- seguimiento: Object (Map&lt;string, Seguimiento&gt;)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="2" vertex="1">
                    <mxGeometry y="210" width="340" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="6" value=" METADATOS&#xa;- organizacionCamelCase: String&#xa;- creadoPor: String (ID usuario)&#xa;- creadoPorNombre: String&#xa;- actualizadoPor: String&#xa;- actualizadoPorNombre: String&#xa;- fechaCreacion: Date&#xa;- fechaActualizacion: Date" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="2" vertex="1">
                    <mxGeometry y="280" width="340" height="130" as="geometry"/>
                </mxCell>
                <mxCell id="7" value=" MÉTODOS PRIVADOS&#xa;- _convertirFecha(fecha): Date&#xa;- _formatearFecha(fecha): String&#xa;- _validarDatos(): Array&lt;string&gt;&#xa;- _generarIdSeguimiento(): String" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="2" vertex="1">
                    <mxGeometry y="410" width="340" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="8" value=" MÉTODOS DE STORAGE&#xa;+ getRutaStorageBase(): String&#xa;+ getRutaImagenes(): String&#xa;+ getRutaSeguimiento(): String" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="2" vertex="1">
                    <mxGeometry y="500" width="340" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="9" value=" MÉTODOS DE SEGUIMIENTO&#xa;+ agregarSeguimiento(usuarioId, usuarioNombre, desc, evidencias): id&#xa;+ getSeguimientosArray(): Array&#xa;+ getUltimoSeguimiento(): Object" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="2" vertex="1">
                    <mxGeometry y="570" width="340" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="10" value=" MÉTODOS DE FORMATEO&#xa;+ getNivelRiesgoTexto(): String&#xa;+ getNivelRiesgoColor(): String&#xa;+ getEstadoTexto(): String&#xa;+ getEstadoColor(): String&#xa;+ getFechaInicioFormateada(): String&#xa;+ getFechaFinalizacionFormateada(): String&#xa;+ getFechaCreacionFormateada(): String" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="2" vertex="1">
                    <mxGeometry y="660" width="340" height="130" as="geometry"/>
                </mxCell>
                <mxCell id="11" value="IncidenciaManager" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;marginBottom=0;rounded=0;shadow=0;strokeWidth=2;fillColor=#fff2cc;strokeColor=#d6b656;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="440" y="540" width="380" height="670" as="geometry"/>
                </mxCell>
                <mxCell id="12" value=" ATRIBUTOS&#xa;- incidencias: Array&lt;Incidencia&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="11" vertex="1">
                    <mxGeometry y="30" width="380" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="13" value=" MÉTODOS PRIVADOS&#xa;- _getCollectionName(orgCC): String&#xa;- _generarIdFirebase(): String&#xa;- _generarIdIncidencia(orgCC): String (INC-*)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="11" vertex="1">
                    <mxGeometry y="70" width="380" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="14" value=" MÉTODOS DE STORAGE&#xa;+ subirArchivo(file, ruta, onProgress): Promise&lt;Object&gt;&#xa;+ eliminarArchivo(url): Promise&lt;boolean&gt;&#xa;+ eliminarCarpetaStorage(ruta): Promise&lt;boolean&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="11" vertex="1">
                    <mxGeometry y="140" width="380" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="15" value=" MÉTODOS CRUD&#xa;+ crearIncidencia(data, usuarioActual, archivos): Promise&lt;Incidencia&gt;&#xa;+ getIncidenciaById(id, orgCC): Promise&lt;Incidencia|null&gt;&#xa;+ getIncidenciasByOrganizacion(orgCC, filtros): Promise&lt;Array&gt;&#xa;+ actualizarIncidencia(id, datos, usuarioId, orgCC): Promise&lt;Incidencia&gt;&#xa;+ eliminarIncidencia(id, usuarioId, orgCC, eliminarArchivos): Promise&lt;boolean&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="11" vertex="1">
                    <mxGeometry y="210" width="380" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="16" value=" GESTIÓN DE IMÁGENES&#xa;+ agregarImagenesAIncidencia(id, archivos, usuarioId, usuarioNombre, orgCC): Promise&lt;Array&gt;&#xa;+ eliminarImagenIncidencia(id, urlImagen, usuarioId, usuarioNombre, orgCC): Promise&lt;boolean&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="11" vertex="1">
                    <mxGeometry y="350" width="380" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="17" value=" GESTIÓN DE SEGUIMIENTO&#xa;+ agregarSeguimiento(id, usuarioId, usuarioNombre, desc, archivos, orgCC): Promise&lt;id&gt;&#xa;+ finalizarIncidencia(id, usuarioId, usuarioNombre, descCierre, orgCC): Promise&lt;boolean&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="11" vertex="1">
                    <mxGeometry y="440" width="380" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="18" value=" MÉTODOS DE CONSULTA&#xa;+ getIncidenciasPorSucursal(sucursalId, orgCC): Promise&lt;Array&gt;&#xa;+ getIncidenciasPorEstado(estado, orgCC): Promise&lt;Array&gt;&#xa;+ getIncidenciasPorRiesgo(nivelRiesgo, orgCC): Promise&lt;Array&gt;&#xa;+ getEstadisticas(orgCC): Promise&lt;Object&gt;&#xa;+ verificarIncidenciaExistente(id, orgCC): Promise&lt;boolean&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="11" vertex="1">
                    <mxGeometry y="530" width="380" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="19" value=" UTILIDADES&#xa;+ limpiarCache(): void" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="11" vertex="1">
                    <mxGeometry y="630" width="380" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="22" value=" incidencias_{organizacionCC}" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;marginBottom=0;rounded=0;shadow=0;strokeWidth=2;fillColor=#ffe6cc;strokeColor=#d79b00;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="480" y="40" width="300" height="420" as="geometry"/>
                </mxCell>
                <mxCell id="23" value=" ATRIBUTOS DEL DOCUMENTO&#xa;// IDs de referencia&#xa;sucursalId: String&#xa;reportadoPorId: String&#xa;categoriaId: String&#xa;subcategoriaId: String&#xa;&#xa;// Fechas y estado&#xa;fechaInicio: Timestamp&#xa;fechaFinalizacion: Timestamp | null&#xa;nivelRiesgo: String&#xa;estado: String&#xa;&#xa;// Contenido&#xa;detalles: String&#xa;imagenes: Array&lt;string&gt;&#xa;seguimiento: Object&#xa;&#xa;// Metadatos&#xa;organizacionCamelCase: String&#xa;creadoPor: String&#xa;creadoPorNombre: String&#xa;actualizadoPor: String&#xa;actualizadoPorNombre: String&#xa;fechaCreacion: Timestamp&#xa;fechaActualizacion: Timestamp" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="22" vertex="1">
                    <mxGeometry y="30" width="300" height="390" as="geometry"/>
                </mxCell>
                <mxCell id="25" value="ESTRUCTURA DE CARPETAS" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;marginBottom=0;rounded=0;shadow=0;strokeWidth=1;fillColor=#f5f5f5;strokeColor=#999999;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="900" y="540" width="300" height="150" as="geometry"/>
                </mxCell>
                <mxCell id="26" value=" incidencias_{organizacionCC}/&#xa;   └── {incidenciaId}/&#xa;       ├── imagenes/&#xa;       │   └── {timestamp}_{nombre}.jpg&#xa;       └── seguimiento/&#xa;           └── {seguimientoId}/&#xa;               └── {timestamp}_{nombre}.jpg" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="25" vertex="1">
                    <mxGeometry y="30" width="300" height="110" as="geometry"/>
                </mxCell>
                <mxCell id="27" value=" ESTRUCTURA DE SEGUIMIENTO" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;marginBottom=0;rounded=0;shadow=0;strokeWidth=1;fillColor=#f8f8f8;strokeColor=#999999;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="900" y="310" width="300" height="150" as="geometry"/>
                </mxCell>
                <mxCell id="28" value=" {seguimientoId}: {&#xa;    usuarioId: String,&#xa;    usuarioNombre: String,&#xa;    descripcion: String,&#xa;    evidencias: Array&lt;string&gt; (URLs),&#xa;    fecha: Timestamp&#xa;}" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="27" vertex="1">
                    <mxGeometry y="30" width="300" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="29" value="" style="endArrow=block;endFill=1;endSize=8;startArrow=block;startFill=0;startSize=8;strokeWidth=2;edgeStyle=orthogonalEdgeStyle;" parent="1" source="11" target="2" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="30" value="gestiona" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=12;fontStyle=1;" parent="29" vertex="1" connectable="0">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="-0.3" y="1" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="31" value="" style="endArrow=open;dashed=1;endFill=0;strokeWidth=1;strokeColor=#666666;strokeDashPattern=6 3;edgeStyle=orthogonalEdgeStyle;" parent="1" source="2" target="22" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="32" value="mapea a" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#666666;" parent="31" vertex="1" connectable="0">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="0.5" y="-1" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="33" value="" style="endArrow=open;dashed=1;endFill=0;strokeWidth=1;strokeColor=#666666;strokeDashPattern=6 3;edgeStyle=orthogonalEdgeStyle;" parent="1" source="11" target="22" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="34" value="lee/escribe" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#666666;" parent="33" vertex="1" connectable="0">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="-0.2" y="-1" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="35" value="" style="endArrow=open;dashed=1;endFill=0;strokeWidth=1;strokeColor=#666666;strokeDashPattern=6 3;edgeStyle=orthogonalEdgeStyle;" parent="1" source="11" target="25" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="36" value="sube/elimina" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#666666;" parent="35" vertex="1" connectable="0">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="0.5" y="1" as="offset"/>
                    </mxGeometry>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>